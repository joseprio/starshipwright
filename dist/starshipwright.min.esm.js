var starshipwright=function(t){var e={};function c(o){if(e[o])return e[o].exports;var h=e[o]={i:o,l:!1,exports:{}};return t[o].call(h.exports,h,h.exports,c),h.l=!0,h.exports}return c.m=t,c.c=e,c.d=function(t,e,o){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)c.d(o,h,function(e){return t[e]}.bind(null,h));return o},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c(c.s=0)}([function(t,e,c){"use strict";c.r(e),c.d(e,"newship",(function(){return S})),c.d(e,"newfaction",(function(){return C}));class o{constructor(t){this.seedPosition=0,this.arrayPosition=0,this.hrCache={},this.seed=t,this.seed.length<8&&(this.seed="padding_"+this.seed),this.seed.length%2==0&&(this.seed="1"+this.seed),this.stateArray=[2972948403,3086140710,2071788248,3026137486,1411764137,2265725585,2923087685,1593177610],this.state=3234042090;for(var e=this.seed.length-1;e>=0;e--){var c=this.seed.charCodeAt(e);this.state=((this.state<<5)+this.state^c^this.state<<c%13+1^this.state>>c%17+1)>>>0,this.stateArray[e%8]^=((this.state>>9)*(this.state%16384+3427)^c)>>>0}}sr(){var t=this.seed.charCodeAt(this.seedPosition),e=this.stateArray[this.arrayPosition];return this.state=((this.state<<5)+this.state+e^t^this.state<<t%17+1^this.state>>t%13+1)>>>0,this.stateArray[this.arrayPosition]=(e>>3^e<<t%19+1^this.state%134217728*3427)>>>0,this.seedPosition=(this.seedPosition+1)%this.seed.length,this.arrayPosition=(this.arrayPosition+1)%8,this.state}hr_xorshift(t){const e=[1160605769,1424711319,876532818,1419174464];let c=1206170165;if(null==t&&(t="?/?/?/",c=3379896793),this.hrCache.hasOwnProperty(t))return this.hrCache[t];for(var o=t.length-1;o>=0;o--){const h=t.charCodeAt(o);let r=e[0]^h;r=(r^r<<11)>>>0,r=(r^r>>8)>>>0,e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=(e[3]^e[3]>>19^r)>>>0,c=3427*(c^h<<24)^e[3]}for(var h=this.seed.length-1;h>=0;h--){const t=this.seed.charCodeAt(h);let o=e[0]^t;o=(o^o<<11)>>>0,o=(o^o>>8)>>>0,e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=(e[3]^e[3]>>19^o)>>>0,c=3427*(c^t<<24)^e[3]}return this.hrCache[t]=c>>>0,this.hrCache[t]}sd(t,e){return(4294967296*this.sr()+this.sr())/0x10000000000000000*(e-t)+t}hd(t,e,c){return(4294967296*this.hr_xorshift(c)+this.hr_xorshift(c+"@"))/0x10000000000000000*(e-t)+t}si(t,e){return Math.floor((4294967296*this.sr()+this.sr())/0x10000000000000000*(e+1-t)+t)}hi(t,e,c){return Math.floor((4294967296*this.hr_xorshift(c)+this.hr_xorshift(c+"@"))/0x10000000000000000*(e+1-t)+t)}sb(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t}hb(t,e){return(4294967296*this.hr_xorshift(e)+this.hr_xorshift(e+"@"))/0x10000000000000000<t}ss(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t?-1:1}hs(t,e){return(4294967296*this.hr_xorshift(e)+this.hr_xorshift(e+"@"))/0x10000000000000000<t?-1:1}sseq(t,e){for(var c=0;(4294967296*this.sr()+this.sr())/0x10000000000000000<t&&c<e;)c++;return c}hseq(t,e,c){for(var o=0;(4294967296*this.hr_xorshift(c+o)+this.hr_xorshift(c+"@"+o))/0x10000000000000000<t&&o<e;)o++;return o}schoose(t){for(var e=0,c=0;c<t.length;c++)e+=t[c];for(var o=this.sd(0,e),h=0;h<t.length;h++)if((o-=t[h])<0)return h;return 0}hchoose(t,e){for(var c=0,o=0;o<t.length;o++)c+=t[o];for(var h=this.hd(0,c,e),r=0;r<t.length;r++)if((h-=t[r])<0)return r;return 0}}function h(t,e,c){return Math.max(e,Math.min(c,t))}function r(t,e){for(var c=Math.floor(t).toString(16);c.length<e;)c="0"+c;return c}function a(t){return"#"+r(Math.floor(255*h(t[0],0,1)),2)+(r(Math.floor(255*h(t[1],0,1)),2)+r(Math.floor(255*h(t[2],0,1)),2))}function i(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function s(t){var e=t[1]*t[2],c=t[2]-e,o=6*((t[0]%1+1)%1),h=Math.floor(o),r=e*(1-Math.abs(o%2-1));switch(h){case 0:return[e+c,r+c,c];case 1:return[r+c,e+c,c];case 2:return[c,e+c,r+c];case 3:return[c,r+c,e+c];case 4:return[r+c,c,e+c];default:return[e+c,c,r+c]}}class n{constructor(t){this.seed=t,this.randomizer=new o(this.seed),this.cache={},this.setupComponentChances()}setupComponentChances(){this.componentChances=[];this.componentChances[0]=.8*this.randomizer.sd(.001,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[1]=.9*this.randomizer.sd(.01,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[2]=1*this.randomizer.sd(.001,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[3]=3*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[4]=.5*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[5]=.05*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[6]=.5*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8))}setupColors(){if(null==this.cache["base colors"]){var t=6;this.cache["base color count"]=1+(this.randomizer.hb(.7,"base color +1")?1:0)+this.randomizer.hseq(.3,3,"base color count"),this.cache["base colors"]=new Array(this.cache["base color count"]),this.cache["base color chances"]=new Array(this.cache["base color count"]);for(var e=0;e<this.cache["base color count"];e++){var c="base color"+e;this.cache["base colors"][e]=s([Math.pow(this.randomizer.hd(0,1,c+"hue"),2),h(this.randomizer.hd(-.2,1,c+"saturation"),0,Math.pow(this.randomizer.hd(0,1,c+"saturation bound"),4)),h(this.randomizer.hd(.7,1.1,c+"value"),0,1)]),this.cache["base color chances"][e]=Math.pow(2,this.randomizer.hd(0,t,c+"chances"))}}if(null==this.cache["window colors"]){t=5;this.cache["window color count"]=1+(this.randomizer.hb(.3,"window color +1")?1:0),this.cache["window colors"]=new Array(this.cache["window color count"]),this.cache["window color chances"]=new Array(this.cache["window color count"]);for(e=0;e<this.cache["window color count"];e++){c="window color"+e;this.cache["window colors"][e]=s([this.randomizer.hb(.6,"window color blues only")?this.randomizer.hd(1/3,3/4,"window color blue hue"):this.randomizer.hd(0,1,"window color hue"),Math.pow(h(this.randomizer.hd(-.2,1.2,"window color hue"),0,1),.5),Math.pow(h(this.randomizer.hd(.4,1.3,"window color value"),0,1),.5)]),this.cache["window color chances"][e]=Math.pow(2,this.randomizer.hd(0,t,c+"chances"))}}}getBaseColor(t){null==this.cache["base colors"]&&this.setupColors();var e=this.cache["base colors"][t.r.schoose(this.cache["base color chances"])];return t.r.sb(null==this.cache["base color shift chance"]?this.cache["base color shift chance"]=Math.pow(this.randomizer.hd(0,.5,"base color shift chance"),2):this.cache["base color shift chance"])&&((e=[e[0],e[1],e[2]])[0]=h(e[0]+(null==this.cache["base color shift range red"]?this.cache["base color shift range red"]=Math.pow(this.randomizer.hd(0,.6,"base color shift range red"),2):this.cache["base color shift range red"])*h(t.r.sd(-1,1.2),0,1)*h(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),e[1]=h(e[1]+(null==this.cache["base color shift range green"]?this.cache["base color shift range green"]=Math.pow(this.randomizer.hd(0,.6,"base color shift range green"),2):this.cache["base color shift range green"])*h(t.r.sd(-1,1.2),0,1)*h(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),e[2]=h(e[2]+(null==this.cache["base color shift range blue"]?this.cache["base color shift range blue"]=Math.pow(this.randomizer.hd(0,.6,"base color shift range blue"),2):this.cache["base color shift range blue"])*h(t.r.sd(-1,1.2),0,1)*h(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1)),e}getwindowcolor(t){return null==this.cache["window colors"]&&this.setupColors(),this.cache["window colors"][t.r.schoose(this.cache["window color chances"])]}}function l(t,e){return 1-e[1]/t.h}function f(t,e,c,o){var h=1;return c&&(h=Math.min(h,1-Math.abs(e[0]-t.hw)/t.hw)),o&&(h=Math.min(h,1-Math.abs(e[1]-t.hh)/t.hh)),h}function d(t,e){return f(t,e,!0,!0)*(1-1/((t.w+t.h)/1e3+1))*Math.pow(t.f.randomizer.hd(0,1,"master bigness"),.5)*(1-t.getpcdone())}function m(t,e){return[Math.min(e[0][0]-24,t.w-24-e[1][0]),Math.min(e[0][1]-24,t.h-24-e[1][1])]}function u(t,e,c,o){var r=t.cfx.createLinearGradient(c[0],c[1],2*e[0]-c[0],2*e[1]-c[1]),a=function(t){return"rgba(0,0,0,"+h(t,0,1)+")"}(o);return r.addColorStop(0,a),r.addColorStop(.5,"rgba(0,0,0,0)"),r.addColorStop(1,a),r}const g=[];g[0]=function(t,e){let c=8;var o=Math.pow(d(t,e),.3);if(t.r.sb(t.f.randomizer.hd(0,.9,"com0 bigchance"))*o)for(;t.r.sb((null==t.f.cache["com0 bigincchance"]?t.f.cache["com0 bigincchance"]=t.f.randomizer.hd(0,.5,"com0 bigincchance"):t.f.cache["com0 bigincchance"])*o);){var r=m(t,[[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]]);if(!(Math.min(r[0],r[1])>.5*c))break;c*=1.5}var s=2*c,n=[Math.ceil(t.r.sd(1,Math.max(2,.5*c))),Math.ceil(t.r.sd(1,Math.max(2,.5*c)))],l=Math.min(n[0],n[1])*t.r.sd(.1,1.2),f=[n[0]+2*l,n[1]+2*l],g=[Math.ceil(s/f[0]),Math.ceil(s/f[1])],x=[Math.round(g[0]*f[0]/2),Math.round(g[1]*f[1]/2)],w=t.getpcdone(),b=t.f.getBaseColor(t),M=a(i(b,t.r.sd(.4,1))),p=a(i(b,t.r.sd(.4,1)));t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(e[0]-x[0]-1,e[1]-x[1]-1,f[0]*g[0]+2,f[1]*g[1]+2),t.cfx.fillStyle=p,t.cfx.fillRect(e[0]-x[0],e[1]-x[1],f[0]*g[0],f[1]*g[1]),t.cfx.fillStyle=M;for(var v=0;v<g[0];v++)for(var z=e[0]+l+v*f[0]-x[0],y=0;y<g[1];y++){var S=e[1]+l+y*f[1]-x[1];t.cfx.fillRect(z,S,n[0],n[1])}t.r.sb(h(c/8*(.6*w+.3),0,.98))&&(t.cfx.fillStyle=u(t,e,[e[0]+x[0],e[1]],t.r.sd(0,.9)),t.cfx.fillRect(e[0]-x[0],e[1]-x[1],f[0]*g[0],f[1]*g[1]))},g[1]=function(t,e){var c=8,o=Math.pow(d(t,e),.2);if(t.r.sb((null==t.f.cache["com1 bigchance"]?t.f.cache["com1 bigchance"]=t.f.randomizer.hd(.3,1,"com1 bigchance"):t.f.cache["com1 bigchance"])*o))for(;t.r.sb((null==t.f.cache["com1 bigincchance"]?t.f.cache["com1 bigincchance"]=t.f.randomizer.hd(0,.6,"com1 bigincchance"):t.f.cache["com1 bigincchance"])*o);){var r=m(t,[[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]]);if(!(Math.min(r[0],r[1])>.5*c))break;c*=1.5}var s=Math.ceil(t.r.sd(.8,2)*c),n=Math.ceil(t.r.sd(.8,2)*c),l=t.r.si(3,Math.max(4,s)),f=Math.max(1,Math.round(s/l));s=f*l;var g=a(i(t.f.getBaseColor(t),t.r.sd(.5,1))),x=t.r.sd(.3,.9);if(t.r.sb(null==t.f.cache["com1 hchance"]?t.f.cache["com1 hchance"]=h(t.f.randomizer.hd(-.2,1.2,"com1 hchance"),0,1):t.f.cache["com1 hchance"])){var w=[e[0]-Math.floor(s/2),e[1]-Math.floor(n/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(w[0]-1,w[1]-1,s+2,n+2),t.cfx.fillStyle=g,t.cfx.fillRect(w[0],w[1],s,n);for(var b=0;b<f;b++)t.cfx.fillStyle=u(t,[w[0]+(b+.5)*l,e[1]],[w[0]+b*l,e[1]],x),t.cfx.fillRect(w[0]+b*l,w[1],l,n)}else{w=[e[0]-Math.floor(n/2),e[1]-Math.floor(s/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(w[0]-1,w[1]-1,n+2,s+2),t.cfx.fillStyle=g,t.cfx.fillRect(w[0],w[1],n,s);for(b=0;b<f;b++)t.cfx.fillStyle=u(t,[e[0],w[1]+(b+.5)*l],[e[0],w[1]+b*l],x),t.cfx.fillRect(w[0],w[1]+b*l,s,l)}},g[2]=function(t,e){let c=8;var o=Math.pow(d(t,e),.05);if(t.r.sb((null==t.f.cache["com2 bigchance"]?t.f.cache["com2 bigchance"]=t.f.randomizer.hd(0,1,"com2 bigchance"):t.f.cache["com2 bigchance"])*o))for(;t.r.sb((null==t.f.cache["com2 bigincchance"]?t.f.cache["com2 bigincchance"]=t.f.randomizer.hd(0,.9,"com2 bigincchance"):t.f.cache["com2 bigincchance"])*o);){var r=m(t,[[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]]);if(!(Math.min(r[0],r[1])>.5*c))break;c*=1.5}var s=Math.ceil(t.r.sd(.6,1.4)*c),n=Math.ceil(t.r.sd(1,2)*c),l=[Math.ceil(h(s*t.r.sd(.7,1)/2,1,s)),Math.ceil(h(s*t.r.sd(.8,1)/2,1,s))],f=[Math.floor(h(s*t.r.sd(.05,.25),1,n)),Math.floor(h(s*t.r.sd(.1,.3),1,n))],u=f[0]+f[1],g=t.r.sb(null==t.f.cache["com2 oddchance"]?t.f.cache["com2 oddchance"]=Math.pow(t.f.randomizer.hd(0,1,"com2 oddchance"),.5):t.f.cache["com2 oddchance"]),x=h(Math.floor(n/u),1,n),w=x*u+(g?f[0]:0),b=t.f.getBaseColor(t),M=[i(b,t.r.sd(.6,1)),i(b,t.r.sd(.6,1))],p=1-t.r.sd(.5,.95),v=[i(M[0],p),i(M[1],p)];if(t.r.sb(null==t.f.cache["com2 verticalchance"]?t.f.cache["com2 verticalchance"]=Math.pow(t.f.randomizer.hd(0,1,"com2 verticalchance"),.1):t.f.cache["com2 verticalchance"])){(S=[t.cfx.createLinearGradient(e[0]-l[0],e[1],e[0]+l[0],e[1]),t.cfx.createLinearGradient(e[0]-l[1],e[1],e[0]+l[1],e[1])])[0].addColorStop(0,a(v[0])),S[0].addColorStop(.5,a(M[0])),S[0].addColorStop(1,a(v[0])),S[1].addColorStop(0,a(v[1])),S[1].addColorStop(.5,a(M[1])),S[1].addColorStop(1,a(v[1]));for(var z=Math.floor(e[1]-w/2),y=0;y<x;y++)t.cfx.fillStyle=S[0],t.cfx.fillRect(e[0]-l[0],z+y*u,2*l[0],f[0]),t.cfx.fillStyle=S[1],t.cfx.fillRect(e[0]-l[1],z+y*u+f[0],2*l[1],f[1]);g&&(t.cfx.fillStyle=S[0],t.cfx.fillRect(e[0]-l[0],z+x*u,2*l[0],f[0]))}else{var S;(S=[t.cfx.createLinearGradient(e[0],e[1]-l[0],e[0],e[1]+l[0]),t.cfx.createLinearGradient(e[0],e[1]-l[1],e[0],e[1]+l[1])])[0].addColorStop(0,a(v[0])),S[0].addColorStop(.5,a(M[0])),S[0].addColorStop(1,a(v[0])),S[1].addColorStop(0,a(v[1])),S[1].addColorStop(.5,a(M[1])),S[1].addColorStop(1,a(v[1]));var C=Math.floor(e[0]-w/2);for(y=0;y<x;y++)t.cfx.fillStyle=S[0],t.cfx.fillRect(C+y*u,e[1]-l[0],f[0],2*l[0]),t.cfx.fillStyle=S[1],t.cfx.fillRect(C+y*u+f[0],e[1]-l[1],f[1],2*l[1]);g&&(t.cfx.fillStyle=S[0],t.cfx.fillRect(C+x*u,e[1]-l[0],f[0],2*l[0]))}},g[3]=function(t,e){if(t.r.sb(l(t,e)-.3)||t.getcellstate(e[0],e[1]+6*1.2)>0||t.getcellstate(e[0],e[1]+10.8)>0)for(var c=0;c<100;c++){var o=t.r.schoose(t.f.componentChances);if(3!=o)return void g[o](t,e)}let h=8;var r=Math.pow(d(t,e),.1);if(t.r.sb((null==t.f.cache["com3 bigchance"]?t.f.cache["com3 bigchance"]=t.f.randomizer.hd(.6,1,"com3 bigchance"):t.f.cache["com3 bigchance"])*r))for(;t.r.sb((null==t.f.cache["com3 bigincchance"]?t.f.cache["com3 bigincchance"]=t.f.randomizer.hd(.3,.8,"com3 bigincchance"):t.f.cache["com3 bigincchance"])*r);){var s=m(t,[[e[0]-h,e[1]-h],[e[0]+h,e[1]+h]]);if(!(Math.min(s[0],s[1])>.5*h))break;h*=1.5}var n=t.r.sd(1,2)*h,f=Math.ceil(t.r.sd(.3,1)*h),u=n*t.r.sd(.25,.6),x=(n+u)/2/2,w=[Math.max(1,Math.ceil(f*t.r.sd(.08,.25))),Math.max(1,Math.ceil(f*t.r.sd(.03,.15)))],b=w[0]+w[1],M=Math.ceil(f/b);f=M*b+w[0],t.f.setupColors();var p=t.f.cache["base colors"][null==t.f.cache["com3 basecolor"]?t.f.cache["com3 basecolor"]=t.f.randomizer.hchoose(t.f.cache["base color chances"],"com3 basecolor"):t.f.cache["com3 basecolor"]],v=null==t.f.cache["com3 lightness0 mid"]?t.f.cache["com3 lightness0 mid"]=t.f.randomizer.hd(.5,.8,"com3 lightness0 mid"):t.f.cache["com3 lightness0 mid"],z=v-(null==t.f.cache["com3 lightness0 edge"]?t.f.cache["com3 lightness0 edge"]=t.f.randomizer.hd(.2,.4,"com3 lightness0 edge"):t.f.cache["com3 lightness0 edge"]),y=null==t.f.cache["com3 lightness1 edge"]?t.f.cache["com3 lightness1 edge"]=t.f.randomizer.hd(0,.2,"com3 lightness1 edge"):t.f.cache["com3 lightness1 edge"],S=[t.cfx.createLinearGradient(e[0]-x,e[1],e[0]+x,e[1]),t.cfx.createLinearGradient(e[0]-x,e[1],e[0]+x,e[1])];S[0].addColorStop(0,a(i(p,z))),S[0].addColorStop(.5,a(i(p,v))),S[0].addColorStop(1,a(i(p,z))),S[1].addColorStop(0,a(i(p,y))),S[1].addColorStop(.5,a(p)),S[1].addColorStop(1,a(i(p,y)));var C=Math.ceil(e[1]-f/2);t.cfx.fillStyle=S[0],t.cfx.beginPath(),t.cfx.moveTo(e[0]-u/2,C),t.cfx.lineTo(e[0]+u/2,C),t.cfx.lineTo(e[0]+n/2,C+f),t.cfx.lineTo(e[0]-n/2,C+f),t.cfx.fill(),t.cfx.fillStyle=S[1];for(var P=[C+w[0],C+b],_=0;_<M;_++){var R=[_*b+w[0],(_+1)*b],T=[P[0]+_*b,P[1]+_*b];s=[(u+R[0]/f*(n-u))/2,(u+R[1]/f*(n-u))/2];t.cfx.beginPath(),t.cfx.moveTo(e[0]-s[0],T[0]),t.cfx.lineTo(e[0]+s[0],T[0]),t.cfx.lineTo(e[0]+s[1],T[1]),t.cfx.lineTo(e[0]-s[1],T[1]),t.cfx.fill()}},g[4]=function(t,e){var c=f(t,e,!0,!1),o=t.r.sd(.7,1),h=t.r.sd(0,.2),r=t.f.getBaseColor(t),s=a(i(r,o)),n=a(i(r,h));null==t.f.cache["com4 directionc"]&&(t.f.cache["com4 directionc"]=[1*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc0"),4),.1*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc1"),4),.2*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc2"),4)]);var l=Math.max(3,Math.ceil(t.size*Math.pow(t.r.sd(.4,1),2)*(null==t.f.cache["com4 maxwidth"]?t.f.cache["com4 maxwidth"]=t.f.randomizer.hd(.02,.1,"com4 maxwidth"):t.f.cache["com4 maxwidth"]))),d=Math.floor(l/2),m=l%2,u=t.r.schoose([t.f.cache["com4 directionc"][0]*(2-c),t.f.cache["com4 directionc"][1],t.f.cache["com4 directionc"][2]*(1+c)]),x=null;if(0==u){var w=e[1]-24,b=Math.min(Math.max(8,w-t.r.si(0,16)),Math.floor(.7*t.size*Math.pow(t.r.sd(0,1),null==t.f.cache["com4 hpower0"]?t.f.cache["com4 hpower0"]=t.f.randomizer.hd(2,6,"com4 hpower0"):t.f.cache["com4 hpower0"]))),M=[[e[0]-d,e[1]-b],[e[0]+d+m,e[1]]];(p=t.cfx.createLinearGradient(M[0][0],M[0][1],M[1][0],M[0][1])).addColorStop(0,n),p.addColorStop(.5,s),p.addColorStop(1,n),t.cfx.fillStyle=p,t.cfx.fillRect(M[0][0],M[0][1],l,b),x=[e[0],e[1]-b]}else if(1==u){w=t.h-(24+e[1]),b=Math.min(Math.max(8,w-t.r.si(0,16)),Math.floor(.6*t.size*Math.pow(t.r.sd(0,1),null==t.f.cache["com4 hpower1"]?t.f.cache["com4 hpower1"]=t.f.randomizer.hd(2,7,"com4 hpower1"):t.f.cache["com4 hpower1"]))),M=[[e[0]-d,e[1]],[e[0]+d+m,e[1]+b]];(p=t.cfx.createLinearGradient(M[0][0],M[0][1],M[1][0],M[0][1])).addColorStop(0,n),p.addColorStop(.5,s),p.addColorStop(1,n),t.cfx.fillStyle=p,t.cfx.fillRect(M[0][0],M[0][1],l,b),x=[e[0],e[1]+b]}else if(2==u){var p;(p=t.cfx.createLinearGradient(e[0],e[1]-d,e[0],e[1]+d+m)).addColorStop(0,n),p.addColorStop(.5,s),p.addColorStop(1,n),t.cfx.fillStyle=p,t.cfx.fillRect(e[0],e[1]-d,Math.ceil(t.hw-e[0])+1,l),x=[Math.floor(t.hw),e[1]+b]}if(null==t.f.cache["com4 covercomc"]&&(t.f.cache["com4 covercomc"]=[.6*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc0"),2),.2*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc1"),2),1*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc2"),2)]),g[t.r.schoose(t.f.cache["com4 covercomc"])](t,e),t.getcellstate(x[0],x[1])>0){var v=[x[0]+Math.round(6*t.r.sd(-1,1)),x[1]+Math.round(6*t.r.sd(-1,1))];t.getcellstate(v[0],v[1])>0?g[t.r.schoose(t.f.cache["com4 covercomc"])](t,v):g[t.r.schoose(t.f.cache["com4 covercomc"])](t,x)}},g[5]=function(t,e){let c=8;var o=Math.pow(d(t,e),.1);if(t.r.sb((null==t.f.cache["com5 bigchance"]?t.f.cache["com5 bigchance"]=t.f.randomizer.hd(0,.9,"com5 bigchance"):t.f.cache["com5 bigchance"])*o))for(;t.r.sb((null==t.f.cache["com5 bigincchance"]?t.f.cache["com5 bigincchance"]=t.f.randomizer.hd(0,.8,"com5 bigincchance"):t.f.cache["com5 bigincchance"])*o);){var h=m(t,[[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]]);if(!(Math.min(h[0],h[1])>.5*c))break;c*=1.5}var r=t.r.sd(.75,1),s=t.r.sd(0,.25),n=t.f.getBaseColor(t),l=a(i(n,r)),f=a(i(n,s)),u=1+t.r.sseq(null==t.f.cache["com5 multxc"]?t.f.cache["com5 multxc"]=t.f.randomizer.hd(0,1,"com5 multxc"):t.f.cache["com5 multxc"],Math.floor(1.2*Math.pow(c/8,.6))),g=1+t.r.sseq(null==t.f.cache["com5 multyc"]?t.f.cache["com5 multyc"]=t.f.randomizer.hd(0,1,"com5 multyc"):t.f.cache["com5 multyc"],Math.floor(1.2*Math.pow(c/8,.6))),x=t.r.sd(.5,1)*c/Math.max(u,g),w=x+.5,b=x+1,M=.2*x,p=x*u,v=x*g,z=[e[0]-p,e[1]-v];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")";for(var y=0;y<u;y++)for(var S=z[0]+(2*y+1)*x,C=0;C<g;C++){var P=z[1]+(2*C+1)*x;t.cfx.beginPath(),t.cfx.arc(S,P,b,0,2*Math.PI),t.cfx.fill()}for(y=0;y<u;y++)for(S=z[0]+(2*y+1)*x,C=0;C<g;C++){P=z[1]+(2*C+1)*x;var _=t.cfx.createRadialGradient(S,P,M,S,P,w);_.addColorStop(0,l),_.addColorStop(1,f),t.cfx.fillStyle=_,t.cfx.beginPath(),t.cfx.arc(S,P,w,0,2*Math.PI),t.cfx.fill()}},g[6]=function(t,e){if(t.nextpass<=0||t.r.sb(l(t,e)))return void g[t.r.schoose(function(t,e,c){const o=new Array(c-e);for(let h=c;h>=e;h--)o[h-e]=t[h];return o}(t.f.componentChances,0,5))](t,e);let c=8;var o=Math.pow(d(t,e),.05);if(t.r.sb((null==t.f.cache["com6 bigchance"]?t.f.cache["com6 bigchance"]=t.f.randomizer.hd(0,.9,"com6 bigchance"):t.f.cache["com6 bigchance"])*o))for(;t.r.sb((null==t.f.cache["com6 bigincchance"]?t.f.cache["com6 bigincchance"]=t.f.randomizer.hd(0,.8,"com6 bigincchance"):t.f.cache["com6 bigincchance"])*o);){var h=m(t,[[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]]);if(!(Math.min(h[0],h[1])>.5*c))break;c*=1.5}var r=Math.ceil(2*c*t.r.sd(.6,1)),s=Math.floor(r/2),n=r%2,f=r*Math.pow(t.r.sd(null==t.f.cache["com6 h1min"]?t.f.cache["com6 h1min"]=Math.pow(t.f.randomizer.hd(0,.8,"com6 h1min"),.5):t.f.cache["com6 h1min"],.9),null==t.f.cache["com6 h1power"]?t.f.cache["com6 h1power"]=t.f.randomizer.hd(.5,1.5,"com6 h1power"):t.f.cache["com6 h1power"]),u=Math.floor(f/2),x=r%2,w=Math.max(0-(r-f)/2,r*(t.r.sd(0,.45)+t.r.sd(0,.45))*(null==t.f.cache["com6 backness"]?t.f.cache["com6 backness"]=t.f.randomizer.hb(.8,"com6 backnesstype")?t.f.randomizer.hd(.2,.9,"com6 backness#pos"):t.f.randomizer.hd(-.2,-.05,"com6 backness#neg"):t.f.cache["com6 backness"])),b=Math.ceil(c*t.r.sd(.7,1)*(null==t.f.cache["com6 width"]?t.f.cache["com6 width"]=Math.pow(t.f.randomizer.hd(.1,3.5,"com6 width"),.5):t.f.cache["com6 width"])),M=Math.floor(b/2),p=b%2,v=[[e[0]-M,e[1]+w-u],[e[0]+M+p,e[1]-s],[e[0]+M+p,e[1]+s+n],[e[0]-M,e[1]+w+u+x]],z=t.f.getBaseColor(t);t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")",t.cfx.beginPath(),t.cfx.moveTo(v[0][0]-1,v[0][1]),t.cfx.lineTo(v[1][0]-1,v[1][1]),t.cfx.lineTo(v[2][0]-1,v[2][1]),t.cfx.lineTo(v[3][0]-1,v[3][1]),t.cfx.fill(),t.cfx.fillStyle=a(i(z,t.r.sd(.7,1))),t.cfx.beginPath(),t.cfx.moveTo(v[0][0],v[0][1]),t.cfx.lineTo(v[1][0],v[1][1]),t.cfx.lineTo(v[2][0],v[2][1]),t.cfx.lineTo(v[3][0],v[3][1]),t.cfx.fill()};const x=[];x[0]=function(t){var e=.05*((t.w-48)*(t.h-48)),c=Math.ceil((t.w-48)*(null==t.f.cache["outline0 iw"]?t.f.cache["outline0 iw"]=t.f.randomizer.hd(.1,1,"outline0 iw"):t.f.cache["outline0 iw"])*.2),o=[[[t.hw-c,24],[t.hw+c,t.h-24]]];null==t.f.cache["outline0 bc"]&&(t.f.cache["outline0 bc"]=t.f.randomizer.hd(2,8,"outline0 bc"));for(var r=2+Math.floor(t.r.sd(.5,1)*t.f.cache["outline0 bc"]*Math.sqrt(t.size)),a=1;a<r;a++){var i=o[t.r.si(0,o.length-1)],s=[i[0][0]+t.r.sd(0,1)*(i[1][0]-i[0][0]),i[0][1]+t.r.sd(0,1)*(i[1][1]-i[0][1])];s[1]<.5*(i[0][1]+i[1][1])&&t.r.sb(null==t.f.cache["outline0 frontbias"]?t.f.cache["outline0 frontbias"]=t.f.randomizer.hd(.5,1.5,"outline0 frontbias"):t.f.cache["outline0 frontbias"])&&(s[1]=i[1][1]-(s[1]-i[0][1]));var n=[h(t.r.sd(0,1)*t.w,24,t.w-24),h(t.r.sd(0,1)*t.h,24,t.h-24)],l=e/Math.abs((n[0]-s[0])*(n[1]-s[1]));if(l<1&&(n[0]=s[0]+(n[0]-s[0])*l,n[1]=s[1]+(n[1]-s[1])*l),s[0]>n[0]){var f=s[0];s[0]=n[0],n[0]=f}if(s[1]>n[1]){f=s[1];s[1]=n[1],n[1]=f}o.push([[Math.floor(s[0]),Math.floor(s[1])],[Math.ceil(n[0]),Math.ceil(n[1])]])}t.csx.fillStyle="#FFFFFF";for(a=0;a<o.length;a++){var d=o[a];t.csx.fillRect(d[0][0],d[0][1],d[1][0]-d[0][0],d[1][1]-d[0][1]),t.csx.fillRect(t.w-d[1][0],d[0][1],d[1][0]-d[0][0],d[1][1]-d[0][1])}},x[1]=function(t){for(var e=.05*((t.w-48)*(t.h-48)),c=Math.max(2,Math.sqrt(e/Math.PI)),o=Math.ceil((t.w-48)*(null==t.f.cache["outline1 iw"]?t.f.cache["outline1 iw"]=t.f.randomizer.hd(.1,1,"outline1 iw"):t.f.cache["outline1 iw"])*.2),h=[],r=Math.floor((t.h-48)/(2*o)),a=0;a<r;a++){let e=[t.hw,t.h-(24+o*(2*a+1))];h.push({v:e,r:o})}null==t.f.cache["outline1 cc"]&&(t.f.cache["outline1 cc"]=t.f.randomizer.hd(10,50,"outline1 cc"));var i=r+Math.floor(t.r.sd(.5,1)*t.f.cache["outline1 cc"]*Math.sqrt(t.size));for(a=r;a<i;a++){var s=h[Math.max(t.r.si(0,h.length-1),t.r.si(0,h.length-1))],n=t.r.sd(1,c),l=t.r.sd(Math.max(0,s.r-n),s.r);if((f=t.r.sd(0,2*Math.PI))>Math.PI&&t.r.sb(null==t.f.cache["outline1 frontbias"]?t.f.cache["outline1 frontbias"]=t.f.randomizer.hd(.5,1.5,"outline1 frontbias"):t.f.cache["outline1 frontbias"]))var f=t.r.sd(0,Math.PI);let e=[s.v[0]+Math.cos(f)*l,s.v[1]+Math.sin(f)*l];n=Math.min(n,e[0]-24),n=Math.min(n,t.w-24-e[0]),n=Math.min(n,e[1]-24),n=Math.min(n,t.h-24-e[1]),h.push({v:e,r:n})}t.csx.fillStyle="#FFFFFF";for(let e=0;e<h.length;e++){const c=h[e];t.csx.beginPath(),t.csx.arc(c.v[0],c.v[1],c.r,0,2*Math.PI),t.csx.fill(),t.csx.beginPath(),t.csx.arc(t.w-c.v[0],c.v[1],c.r,0,2*Math.PI),t.csx.fill()}},x[2]=function(t){var e=[t.w-48,t.h-48],c=[[t.hw,t.r.sd(0,.05)*e[1]+24],[t.hw,t.r.sd(.95,1)*e[1]+24]],o=6/t.size+(null==t.f.cache["outline2 basefatness"]?t.f.cache["outline2 basefatness"]=t.f.randomizer.hd(.03,.1,"outline2 basefatness"):t.f.cache["outline2 basefatness"]),h=1/o,r=Math.max(3,Math.ceil(h*t.r.sd(.05,.1)*Math.sqrt(t.size)));t.csx.lineCap=["round","square"][null==t.f.cache["outline2 linecap"]?t.f.cache["outline2 linecap"]=t.f.randomizer.hi(0,1,"outline2 linecap"):t.f.cache["outline2 linecap"]],t.csx.strokeStyle="#FFFFFF";for(var a=1;a<r;a++){var i=c[a];null==i&&(i=[t.r.sd(0,1)*e[0]+24,Math.pow(t.r.sd(0,1),null==t.f.cache["outline2 frontbias"]?t.f.cache["outline2 frontbias"]=t.f.randomizer.hd(.1,1,"outline2 frontbias"):t.f.cache["outline2 frontbias"])*e[1]+24],c.push(i));for(var s=1+t.r.sseq(null==t.f.cache["outline2 conadjust"]?t.f.cache["outline2 conadjust"]=t.f.randomizer.hd(0,1,"outline2 conadjust"):t.f.cache["outline2 conadjust"],3),n=0;n<s;n++){var l=c[t.r.si(0,c.length-2)];t.csx.lineWidth=t.r.sd(.7,1)*o*t.size,t.csx.beginPath(),t.csx.moveTo(l[0],l[1]),t.csx.lineTo(i[0],i[1]),t.csx.stroke(),t.csx.beginPath(),t.csx.moveTo(t.w-l[0],l[1]),t.csx.lineTo(t.w-i[0],i[1]),t.csx.stroke()}}};class w{constructor(t,e){this.extradone=0,this.nextpass=0,this.nextcell=0,this.totaldone=0,this.f=t,this.baseSeed=e,this.seed=this.f.seed+this.baseSeed,this.r=new o(this.seed),this.size=Math.pow(this.r.sd(this.f.randomizer.hd(2.5,3.5,"size min"),this.f.randomizer.hd(5,7,"size max")),3);const c=this.r.sd(this.f.randomizer.hd(.5,1,"wratio min"),this.f.randomizer.hd(1,1.3,"wratio max")),h=this.r.sd(this.f.randomizer.hd(.7,1,"hratio min"),this.f.randomizer.hd(1.1,1.7,"hratio max"));this.w=Math.floor(this.size*c)+48,this.hw=Math.floor(this.w/2),this.gw=Math.floor((this.w-48)/6),this.gwextra=.5*(this.w-6*this.gw),this.h=Math.floor(this.size*h)+48,this.hh=Math.floor(this.h/2),this.gh=Math.floor((this.h-48)/6),this.ghextra=.5*(this.h-6*this.gh),this.cs=document.createElement("canvas"),this.cs.setAttribute("width",String(this.w)),this.cs.setAttribute("height",String(this.h)),this.csx=this.cs.getContext("2d"),this.cf=document.createElement("canvas"),this.cf.setAttribute("width",String(this.w)),this.cf.setAttribute("height",String(this.h)),this.cfx=this.cf.getContext("2d"),x[this.f.randomizer.hchoose([1,1,1],"outline type")](this),this.csd=this.csx.getImageData(0,0,this.w,this.h),this.cgrid=[];for(var r=0;r<this.gw;r++){this.cgrid[r]=[];for(var a=0;a<this.gh;a++)this.cgrid[r][a]={gx:r,gy:a,x:Math.floor(this.gwextra+6*(r+.5)),y:Math.floor(this.ghextra+6*(a+.5)),state:0}}this.goodcells=[this.cgrid[Math.floor(this.gw/2)][Math.floor(this.gh/2)]];for(var i=0;i<this.goodcells.length;){var s;if((l=this.goodcells[i]).gx>0)0==(s=this.cgrid[l.gx-1][l.gy]).state&&(this.getspa(s.x,s.y)>0?(s.state=1,this.goodcells.push(s)):s.state=-1);if(l.gx<this.gw-1)0==(s=this.cgrid[l.gx+1][l.gy]).state&&(this.getspa(s.x,s.y)>0?(s.state=1,this.goodcells.push(s)):s.state=-1);if(l.gy>0)0==(s=this.cgrid[l.gx][l.gy-1]).state&&(this.getspa(s.x,s.y)>0?(s.state=1,this.goodcells.push(s)):s.state=-1);if(l.gy<this.gh-1)0==(s=this.cgrid[l.gx][l.gy+1]).state&&(this.getspa(s.x,s.y)>0?(s.state=1,this.goodcells.push(s)):s.state=-1);i++}for(var n=0;n<this.goodcells.length;n++){var l=this.goodcells[n],f=this.cgrid[this.gw-1-l.gx][l.gy];1!=f.state&&(f.state=1,this.goodcells.push(f))}this.passes=this.f.randomizer.hi(1,2,"base component passes"),this.extra=Math.max(1,Math.floor(this.goodcells.length*this.f.randomizer.hd(0,1/this.passes,"extra component amount"))),this.totalcomponents=this.passes*this.goodcells.length+this.extra}getcell(t,e){var c=Math.floor((t-this.gwextra)/6),o=Math.floor((e-this.ghextra)/6);return c<0||c>=this.gw||o<0||o>=this.gh?null:this.cgrid[c][o]}getcellstate(t,e){var c=this.getcell(t,e);return null==c?0:c.state}getspa(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>this.w||e<0||e>this.h?-1:this.csd.data[4*(e*this.w+t)+3]}getpcdone(){return this.totaldone/this.totalcomponents}addcomponent(){var t;if(this.nextpass<this.passes)this.nextcell<this.goodcells.length?(t=this.goodcells[this.nextcell],this.nextcell++):(this.nextpass++,t=this.goodcells[0],this.nextcell=1);else{if(!(this.extradone<this.extra))return!0;t=this.goodcells[this.r.si(0,this.goodcells.length-1)],this.extradone++}for(var e=[t.x,t.y],c=0;c<10;c++){var o=[t.x+this.r.si(-6,6),t.y+this.r.si(-6,6)];if(!(o[0]<24||o[0]>this.w-24||o[1]<24||o[1]>this.h-24)&&!(this.getspa(o[0],o[1])<=0)){e=o;break}}return Math.abs(e[0]-this.hw)<6&&this.r.sb(this.f.randomizer.hd(0,1,"com middleness"))&&(e[0]=Math.floor(this.hw)),g[this.r.schoose(this.f.componentChances)](this,e),this.totaldone++,!1}}function b(t){for(var e=1206170165,c=t.length-1;c>=0;c--){var o=t.charCodeAt(c);e=(e<<5)+e^o^e<<o%13+1^e>>o%17+1}return e>>>0}function M(t,e,c){return null==c?Math.floor(t+Math.random()*(e-t+1)):Math.floor(t+function(t){return(4294967296*b("."+t)+b(t))/0x10000000000000000}(c)*(e-t+1))}var p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function v(t,e){for(var c="",o=0;o<t;o++)c+=p[M(0,p.length-1,e+"_"+o)];return c}var z=null;function y(t,e){return z=new w(new n(t),e),function(){if(null!=z){var t=!1;do{t=z.addcomponent()}while(!t);z.cfx.clearRect(z.hw+z.w%2,0,z.w,z.h),z.cfx.scale(-1,1),z.cfx.drawImage(z.cf,0-z.w,0)}}(),z}function S(t){return y(t,v(16,"_"+Math.random()))}function C(){return S(v(16,"_"+Math.random()))}}]);const _starshipwright$newship=starshipwright.newship,_starshipwright$newfaction=starshipwright.newfaction;export{_starshipwright$newship as newship,_starshipwright$newfaction as newfaction};