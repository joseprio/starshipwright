var starshipwright=function(t){var r={};function e(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var s in t)e.d(o,s,function(r){return t[r]}.bind(null,s));return o},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r),e.d(r,"newship",(function(){return S})),e.d(r,"newfaction",(function(){return y}));class o{constructor(t){this.seedPosition=0,this.arrayPosition=0,this.hrCache={},this.seed=t,this.seed.length<8&&(this.seed="padding_"+this.seed),this.seed.length%2==0&&(this.seed="1"+this.seed),this.stateArray=[2972948403,3086140710,2071788248,3026137486,1411764137,2265725585,2923087685,1593177610],this.state=3234042090;for(var r=this.seed.length-1;r>=0;r--){var e=this.seed.charCodeAt(r);this.state=((this.state<<5)+this.state^e^this.state<<e%13+1^this.state>>e%17+1)>>>0,this.stateArray[r%8]^=((this.state>>9)*(this.state%16384+3427)^e)>>>0}}sr(){var t=this.seed.charCodeAt(this.seedPosition),r=this.stateArray[this.arrayPosition];return this.state=((this.state<<5)+this.state+r^t^this.state<<t%17+1^this.state>>t%13+1)>>>0,this.stateArray[this.arrayPosition]=(r>>3^r<<t%19+1^this.state%134217728*3427)>>>0,this.seedPosition=(this.seedPosition+1)%this.seed.length,this.arrayPosition=(this.arrayPosition+1)%8,this.state}hr_xorshift(t){const r=[1160605769,1424711319,876532818,1419174464];let e=1206170165;if(null==t&&(t="?/?/?/",e=3379896793),this.hrCache.hasOwnProperty(t))return this.hrCache[t];for(var o=t.length-1;o>=0;o--){const s=t.charCodeAt(o);let i=r[0]^s;i=(i^i<<11)>>>0,i=(i^i>>8)>>>0,r[0]=r[1],r[1]=r[2],r[2]=r[3],r[3]=(r[3]^r[3]>>19^i)>>>0,e=3427*(e^s<<24)^r[3]}for(var s=this.seed.length-1;s>=0;s--){const t=this.seed.charCodeAt(s);let o=r[0]^t;o=(o^o<<11)>>>0,o=(o^o>>8)>>>0,r[0]=r[1],r[1]=r[2],r[2]=r[3],r[3]=(r[3]^r[3]>>19^o)>>>0,e=3427*(e^t<<24)^r[3]}return this.hrCache[t]=e>>>0,this.hrCache[t]}sd(t,r){return(4294967296*this.sr()+this.sr())/0x10000000000000000*(r-t)+t}hd(t,r,e){return(4294967296*this.hr_xorshift(e)+this.hr_xorshift(e+"@"))/0x10000000000000000*(r-t)+t}si(t,r){return Math.floor((4294967296*this.sr()+this.sr())/0x10000000000000000*(r+1-t)+t)}hi(t,r,e){return Math.floor((4294967296*this.hr_xorshift(e)+this.hr_xorshift(e+"@"))/0x10000000000000000*(r+1-t)+t)}sb(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t}hb(t,r){return(4294967296*this.hr_xorshift(r)+this.hr_xorshift(r+"@"))/0x10000000000000000<t}ss(t){return(4294967296*this.sr()+this.sr())/0x10000000000000000<t?-1:1}hs(t,r){return(4294967296*this.hr_xorshift(r)+this.hr_xorshift(r+"@"))/0x10000000000000000<t?-1:1}sseq(t,r){for(var e=0;(4294967296*this.sr()+this.sr())/0x10000000000000000<t&&e<r;)e++;return e}hseq(t,r,e){for(var o=0;(4294967296*this.hr_xorshift(e+o)+this.hr_xorshift(e+"@"+o))/0x10000000000000000<t&&o<r;)o++;return o}schoose(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];for(var o=this.sd(0,r),s=0;s<t.length;s++)if((o-=t[s])<0)return s;return 0}hchoose(t,r){for(var e=0,o=0;o<t.length;o++)e+=t[o];for(var s=this.hd(0,e,r),i=0;i<t.length;i++)if((s-=t[i])<0)return i;return 0}}function s(t,r,e){return Math.max(r,Math.min(e,t))}function i(t,r){for(var e=Math.floor(t).toString(16);e.length<r;)e="0"+e;return e}function h(t){return"#"+i(Math.floor(255*s(t[0],0,1)),2)+(i(Math.floor(255*s(t[1],0,1)),2)+i(Math.floor(255*s(t[2],0,1)),2))}function a(t,r){return[t[0]*r,t[1]*r,t[2]*r]}function c(t){var r=t[1]*t[2],e=t[2]-r,o=6*((t[0]%1+1)%1),s=Math.floor(o),i=r*(1-Math.abs(o%2-1));switch(s){case 0:return[r+e,i+e,e];case 1:return[i+e,r+e,e];case 2:return[e,r+e,i+e];case 3:return[e,i+e,r+e];case 4:return[i+e,e,r+e];default:return[r+e,e,i+e]}}class n{constructor(t){this.componentChances=[],this.colors=[],this.colorChances=[],this.seed=t,this.randomizer=new o(this.seed),this.cache={},this.setupComponentChances(),this.setupColors()}setupComponentChances(){this.componentChances=[];this.componentChances[0]=.8*this.randomizer.sd(.001,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[1]=.9*this.randomizer.sd(.01,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[2]=1*this.randomizer.sd(.001,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[3]=3*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[4]=.5*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[5]=.05*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8)),this.componentChances[6]=.5*this.randomizer.sd(0,1)*Math.pow(2,this.randomizer.sd(0,8))}setupColors(){const t=1+(this.randomizer.hb(.7,"base color +1")?1:0)+this.randomizer.hseq(.3,3,"base color count");for(var r=0;r<t;r++){var e="base color"+r;this.colors.push(c([Math.pow(this.randomizer.hd(0,1,e+"hue"),2),s(this.randomizer.hd(-.2,1,e+"saturation"),0,Math.pow(this.randomizer.hd(0,1,e+"saturation bound"),4)),s(this.randomizer.hd(.7,1.1,e+"value"),0,1)])),this.colorChances.push(Math.pow(2,this.randomizer.hd(0,6,e+"chances")))}}getBaseColor(t){var r=this.colors[t.r.schoose(this.colorChances)];return t.r.sb(Math.pow(this.randomizer.hd(0,.5,"base color shift chance"),2))&&((r=[r[0],r[1],r[2]])[0]=s(r[0]+Math.pow(this.randomizer.hd(0,.6,"base color shift range red"),2)*s(t.r.sd(-1,1.2),0,1)*s(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),r[1]=s(r[1]+Math.pow(this.randomizer.hd(0,.6,"base color shift range green"),2)*s(t.r.sd(-1,1.2),0,1)*s(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1),r[2]=s(r[2]+Math.pow(this.randomizer.hd(0,.6,"base color shift range blue"),2)*s(t.r.sd(-1,1.2),0,1)*s(t.r.ss(.7)+t.r.ss(.7),-1,1),0,1)),r}}function l(t,r){return 1-r[1]/t.h}function f(t,r,e,o){var s=1;return e&&(s=Math.min(s,1-Math.abs(r[0]-t.hw)/t.hw)),o&&(s=Math.min(s,1-Math.abs(r[1]-t.hh)/t.hh)),s}function d(t,r){return f(t,r,!0,!0)*(1-1/((t.w+t.h)/1e3+1))*Math.pow(t.f.randomizer.hd(0,1,"master bigness"),.5)*(1-t.getpcdone())}function m(t,r){return[Math.min(r[0][0]-24,t.w-24-r[1][0]),Math.min(r[0][1]-24,t.h-24-r[1][1])]}function x(t,r,e,o){var i=t.cfx.createLinearGradient(e[0],e[1],2*r[0]-e[0],2*r[1]-e[1]),h=function(t){return"rgba(0,0,0,"+s(t,0,1)+")"}(o);return i.addColorStop(0,h),i.addColorStop(.5,"rgba(0,0,0,0)"),i.addColorStop(1,h),i}const u=[];u[0]=function(t,r){let e=8;var o=Math.pow(d(t,r),.3);if(t.r.sb(t.f.randomizer.hd(0,.9,"com0 bigchance"))*o)for(;t.r.sb(t.f.randomizer.hd(0,.5,"com0 bigincchance")*o);){var i=m(t,[[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]]);if(!(Math.min(i[0],i[1])>.5*e))break;e*=1.5}var c=2*e,n=[Math.ceil(t.r.sd(1,Math.max(2,.5*e))),Math.ceil(t.r.sd(1,Math.max(2,.5*e)))],l=Math.min(n[0],n[1])*t.r.sd(.1,1.2),f=[n[0]+2*l,n[1]+2*l],u=[Math.ceil(c/f[0]),Math.ceil(c/f[1])],M=[Math.round(u[0]*f[0]/2),Math.round(u[1]*f[1]/2)],g=t.getpcdone(),p=t.f.getBaseColor(t),v=h(a(p,t.r.sd(.4,1))),w=h(a(p,t.r.sd(.4,1)));t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(r[0]-M[0]-1,r[1]-M[1]-1,f[0]*u[0]+2,f[1]*u[1]+2),t.cfx.fillStyle=w,t.cfx.fillRect(r[0]-M[0],r[1]-M[1],f[0]*u[0],f[1]*u[1]),t.cfx.fillStyle=v;for(var b=0;b<u[0];b++)for(var z=r[0]+l+b*f[0]-M[0],C=0;C<u[1];C++){var S=r[1]+l+C*f[1]-M[1];t.cfx.fillRect(z,S,n[0],n[1])}t.r.sb(s(e/8*(.6*g+.3),0,.98))&&(t.cfx.fillStyle=x(t,r,[r[0]+M[0],r[1]],t.r.sd(0,.9)),t.cfx.fillRect(r[0]-M[0],r[1]-M[1],f[0]*u[0],f[1]*u[1]))},u[1]=function(t,r){var e=8,o=Math.pow(d(t,r),.2);if(t.r.sb(t.f.randomizer.hd(.3,1,"com1 bigchance")*o))for(;t.r.sb(t.f.randomizer.hd(0,.6,"com1 bigincchance")*o);){var i=m(t,[[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]]);if(!(Math.min(i[0],i[1])>.5*e))break;e*=1.5}var c=Math.ceil(t.r.sd(.8,2)*e),n=Math.ceil(t.r.sd(.8,2)*e),l=t.r.si(3,Math.max(4,c)),f=Math.max(1,Math.round(c/l));c=f*l;var u=h(a(t.f.getBaseColor(t),t.r.sd(.5,1))),M=t.r.sd(.3,.9);if(t.r.sb(s(t.f.randomizer.hd(-.2,1.2,"com1 hchance"),0,1))){var g=[r[0]-Math.floor(c/2),r[1]-Math.floor(n/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(g[0]-1,g[1]-1,c+2,n+2),t.cfx.fillStyle=u,t.cfx.fillRect(g[0],g[1],c,n);for(var p=0;p<f;p++)t.cfx.fillStyle=x(t,[g[0]+(p+.5)*l,r[1]],[g[0]+p*l,r[1]],M),t.cfx.fillRect(g[0]+p*l,g[1],l,n)}else{g=[r[0]-Math.floor(n/2),r[1]-Math.floor(c/2)];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.25)+")",t.cfx.fillRect(g[0]-1,g[1]-1,n+2,c+2),t.cfx.fillStyle=u,t.cfx.fillRect(g[0],g[1],n,c);for(p=0;p<f;p++)t.cfx.fillStyle=x(t,[r[0],g[1]+(p+.5)*l],[r[0],g[1]+p*l],M),t.cfx.fillRect(g[0],g[1]+p*l,c,l)}},u[2]=function(t,r){let e=8;var o=Math.pow(d(t,r),.05);if(t.r.sb(t.f.randomizer.hd(0,1,"com2 bigchance")*o))for(;t.r.sb(t.f.randomizer.hd(0,.9,"com2 bigincchance")*o);){var i=m(t,[[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]]);if(!(Math.min(i[0],i[1])>.5*e))break;e*=1.5}var c=Math.ceil(t.r.sd(.6,1.4)*e),n=Math.ceil(t.r.sd(1,2)*e),l=[Math.ceil(s(c*t.r.sd(.7,1)/2,1,c)),Math.ceil(s(c*t.r.sd(.8,1)/2,1,c))],f=[Math.floor(s(c*t.r.sd(.05,.25),1,n)),Math.floor(s(c*t.r.sd(.1,.3),1,n))],x=f[0]+f[1],u=t.r.sb(Math.pow(t.f.randomizer.hd(0,1,"com2 oddchance"),.5)),M=s(Math.floor(n/x),1,n),g=M*x+(u?f[0]:0),p=t.f.getBaseColor(t),v=[a(p,t.r.sd(.6,1)),a(p,t.r.sd(.6,1))],w=1-t.r.sd(.5,.95),b=[a(v[0],w),a(v[1],w)];if(t.r.sb(Math.pow(t.f.randomizer.hd(0,1,"com2 verticalchance"),.1))){(S=[t.cfx.createLinearGradient(r[0]-l[0],r[1],r[0]+l[0],r[1]),t.cfx.createLinearGradient(r[0]-l[1],r[1],r[0]+l[1],r[1])])[0].addColorStop(0,h(b[0])),S[0].addColorStop(.5,h(v[0])),S[0].addColorStop(1,h(b[0])),S[1].addColorStop(0,h(b[1])),S[1].addColorStop(.5,h(v[1])),S[1].addColorStop(1,h(b[1]));for(var z=Math.floor(r[1]-g/2),C=0;C<M;C++)t.cfx.fillStyle=S[0],t.cfx.fillRect(r[0]-l[0],z+C*x,2*l[0],f[0]),t.cfx.fillStyle=S[1],t.cfx.fillRect(r[0]-l[1],z+C*x+f[0],2*l[1],f[1]);u&&(t.cfx.fillStyle=S[0],t.cfx.fillRect(r[0]-l[0],z+M*x,2*l[0],f[0]))}else{var S;(S=[t.cfx.createLinearGradient(r[0],r[1]-l[0],r[0],r[1]+l[0]),t.cfx.createLinearGradient(r[0],r[1]-l[1],r[0],r[1]+l[1])])[0].addColorStop(0,h(b[0])),S[0].addColorStop(.5,h(v[0])),S[0].addColorStop(1,h(b[0])),S[1].addColorStop(0,h(b[1])),S[1].addColorStop(.5,h(v[1])),S[1].addColorStop(1,h(b[1]));var y=Math.floor(r[0]-g/2);for(C=0;C<M;C++)t.cfx.fillStyle=S[0],t.cfx.fillRect(y+C*x,r[1]-l[0],f[0],2*l[0]),t.cfx.fillStyle=S[1],t.cfx.fillRect(y+C*x+f[0],r[1]-l[1],f[1],2*l[1]);u&&(t.cfx.fillStyle=S[0],t.cfx.fillRect(y+M*x,r[1]-l[0],f[0],2*l[0]))}},u[3]=function(t,r){if(t.r.sb(l(t,r)-.3)||t.getcellstate(r[0],r[1]+6*1.2)>0||t.getcellstate(r[0],r[1]+10.8)>0)for(var e=0;e<100;e++){var o=t.r.schoose(t.f.componentChances);if(3!=o)return void u[o](t,r)}let s=8;var i=Math.pow(d(t,r),.1);if(t.r.sb(t.f.randomizer.hd(.6,1,"com3 bigchance")*i))for(;t.r.sb(t.f.randomizer.hd(.3,.8,"com3 bigincchance")*i);){var c=m(t,[[r[0]-s,r[1]-s],[r[0]+s,r[1]+s]]);if(!(Math.min(c[0],c[1])>.5*s))break;s*=1.5}var n=t.r.sd(1,2)*s,f=Math.ceil(t.r.sd(.3,1)*s),x=n*t.r.sd(.25,.6),M=(n+x)/2/2,g=[Math.max(1,Math.ceil(f*t.r.sd(.08,.25))),Math.max(1,Math.ceil(f*t.r.sd(.03,.15)))],p=g[0]+g[1],v=Math.ceil(f/p);f=v*p+g[0],t.f.setupColors();var w=t.f.colors[t.f.randomizer.hchoose(t.f.colorChances,"com3 basecolor")],b=t.f.randomizer.hd(.5,.8,"com3 lightness0 mid"),z=b-t.f.randomizer.hd(.2,.4,"com3 lightness0 edge"),C=t.f.randomizer.hd(0,.2,"com3 lightness1 edge"),S=[t.cfx.createLinearGradient(r[0]-M,r[1],r[0]+M,r[1]),t.cfx.createLinearGradient(r[0]-M,r[1],r[0]+M,r[1])];S[0].addColorStop(0,h(a(w,z))),S[0].addColorStop(.5,h(a(w,b))),S[0].addColorStop(1,h(a(w,z))),S[1].addColorStop(0,h(a(w,C))),S[1].addColorStop(.5,h(w)),S[1].addColorStop(1,h(a(w,C)));var y=Math.ceil(r[1]-f/2);t.cfx.fillStyle=S[0],t.cfx.beginPath(),t.cfx.moveTo(r[0]-x/2,y),t.cfx.lineTo(r[0]+x/2,y),t.cfx.lineTo(r[0]+n/2,y+f),t.cfx.lineTo(r[0]-n/2,y+f),t.cfx.fill(),t.cfx.fillStyle=S[1];for(var P=[y+g[0],y+p],_=0;_<v;_++){var R=[_*p+g[0],(_+1)*p],T=[P[0]+_*p,P[1]+_*p];c=[(x+R[0]/f*(n-x))/2,(x+R[1]/f*(n-x))/2];t.cfx.beginPath(),t.cfx.moveTo(r[0]-c[0],T[0]),t.cfx.lineTo(r[0]+c[0],T[0]),t.cfx.lineTo(r[0]+c[1],T[1]),t.cfx.lineTo(r[0]-c[1],T[1]),t.cfx.fill()}},u[4]=function(t,r){var e=f(t,r,!0,!1),o=t.r.sd(.7,1),s=t.r.sd(0,.2),i=t.f.getBaseColor(t),c=h(a(i,o)),n=h(a(i,s));null==t.f.cache["com4 directionc"]&&(t.f.cache["com4 directionc"]=[1*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc0"),4),.1*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc1"),4),.2*Math.pow(t.f.randomizer.hd(0,1,"com4 directionc2"),4)]);var l=Math.max(3,Math.ceil(t.size*Math.pow(t.r.sd(.4,1),2)*t.f.randomizer.hd(.02,.1,"com4 maxwidth"))),d=Math.floor(l/2),m=l%2,x=t.r.schoose([t.f.cache["com4 directionc"][0]*(2-e),t.f.cache["com4 directionc"][1],t.f.cache["com4 directionc"][2]*(1+e)]),M=null;if(0==x){var g=r[1]-24,p=Math.min(Math.max(8,g-t.r.si(0,16)),Math.floor(.7*t.size*Math.pow(t.r.sd(0,1),t.f.randomizer.hd(2,6,"com4 hpower0")))),v=[[r[0]-d,r[1]-p],[r[0]+d+m,r[1]]];(w=t.cfx.createLinearGradient(v[0][0],v[0][1],v[1][0],v[0][1])).addColorStop(0,n),w.addColorStop(.5,c),w.addColorStop(1,n),t.cfx.fillStyle=w,t.cfx.fillRect(v[0][0],v[0][1],l,p),M=[r[0],r[1]-p]}else if(1==x){g=t.h-(24+r[1]),p=Math.min(Math.max(8,g-t.r.si(0,16)),Math.floor(.6*t.size*Math.pow(t.r.sd(0,1),t.f.randomizer.hd(2,7,"com4 hpower1")))),v=[[r[0]-d,r[1]],[r[0]+d+m,r[1]+p]];(w=t.cfx.createLinearGradient(v[0][0],v[0][1],v[1][0],v[0][1])).addColorStop(0,n),w.addColorStop(.5,c),w.addColorStop(1,n),t.cfx.fillStyle=w,t.cfx.fillRect(v[0][0],v[0][1],l,p),M=[r[0],r[1]+p]}else if(2==x){var w;(w=t.cfx.createLinearGradient(r[0],r[1]-d,r[0],r[1]+d+m)).addColorStop(0,n),w.addColorStop(.5,c),w.addColorStop(1,n),t.cfx.fillStyle=w,t.cfx.fillRect(r[0],r[1]-d,Math.ceil(t.hw-r[0])+1,l),M=[Math.floor(t.hw),r[1]+p]}if(null==t.f.cache["com4 covercomc"]&&(t.f.cache["com4 covercomc"]=[.6*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc0"),2),.2*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc1"),2),1*Math.pow(t.f.randomizer.hd(0,1,"com4 covercomc2"),2)]),u[t.r.schoose(t.f.cache["com4 covercomc"])](t,r),t.getcellstate(M[0],M[1])>0){var b=[M[0]+Math.round(6*t.r.sd(-1,1)),M[1]+Math.round(6*t.r.sd(-1,1))];t.getcellstate(b[0],b[1])>0?u[t.r.schoose(t.f.cache["com4 covercomc"])](t,b):u[t.r.schoose(t.f.cache["com4 covercomc"])](t,M)}},u[5]=function(t,r){let e=8;var o=Math.pow(d(t,r),.1);if(t.r.sb(t.f.randomizer.hd(0,.9,"com5 bigchance")*o))for(;t.r.sb(t.f.randomizer.hd(0,.8,"com5 bigincchance")*o);){var s=m(t,[[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]]);if(!(Math.min(s[0],s[1])>.5*e))break;e*=1.5}var i=t.r.sd(.75,1),c=t.r.sd(0,.25),n=t.f.getBaseColor(t),l=h(a(n,i)),f=h(a(n,c)),x=1+t.r.sseq(t.f.randomizer.hd(0,1,"com5 multxc"),Math.floor(1.2*Math.pow(e/8,.6))),u=1+t.r.sseq(t.f.randomizer.hd(0,1,"com5 multyc"),Math.floor(1.2*Math.pow(e/8,.6))),M=t.r.sd(.5,1)*e/Math.max(x,u),g=M+.5,p=M+1,v=.2*M,w=M*x,b=M*u,z=[r[0]-w,r[1]-b];t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")";for(var C=0;C<x;C++)for(var S=z[0]+(2*C+1)*M,y=0;y<u;y++){var P=z[1]+(2*y+1)*M;t.cfx.beginPath(),t.cfx.arc(S,P,p,0,2*Math.PI),t.cfx.fill()}for(C=0;C<x;C++)for(S=z[0]+(2*C+1)*M,y=0;y<u;y++){P=z[1]+(2*y+1)*M;var _=t.cfx.createRadialGradient(S,P,v,S,P,g);_.addColorStop(0,l),_.addColorStop(1,f),t.cfx.fillStyle=_,t.cfx.beginPath(),t.cfx.arc(S,P,g,0,2*Math.PI),t.cfx.fill()}},u[6]=function(t,r){if(t.nextpass<=0||t.r.sb(l(t,r)))return void u[t.r.schoose(function(t,r,e){const o=new Array(e-r);for(let s=e;s>=r;s--)o[s-r]=t[s];return o}(t.f.componentChances,0,5))](t,r);let e=8;var o=Math.pow(d(t,r),.05);if(t.r.sb(t.f.randomizer.hd(0,.9,"com6 bigchance")*o))for(;t.r.sb(t.f.randomizer.hd(0,.8,"com6 bigincchance")*o);){var s=m(t,[[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]]);if(!(Math.min(s[0],s[1])>.5*e))break;e*=1.5}var i=Math.ceil(2*e*t.r.sd(.6,1)),c=Math.floor(i/2),n=i%2,f=i*Math.pow(t.r.sd(Math.pow(t.f.randomizer.hd(0,.8,"com6 h1min"),.5),.9),t.f.randomizer.hd(.5,1.5,"com6 h1power")),x=Math.floor(f/2),M=i%2,g=Math.max(0-(i-f)/2,i*(t.r.sd(0,.45)+t.r.sd(0,.45))*(null==t.f.cache["com6 backness"]?t.f.cache["com6 backness"]=t.f.randomizer.hb(.8,"com6 backnesstype")?t.f.randomizer.hd(.2,.9,"com6 backness#pos"):t.f.randomizer.hd(-.2,-.05,"com6 backness#neg"):t.f.cache["com6 backness"])),p=Math.ceil(e*t.r.sd(.7,1)*Math.pow(t.f.randomizer.hd(.1,3.5,"com6 width"),.5)),v=Math.floor(p/2),w=p%2,b=[[r[0]-v,r[1]+g-x],[r[0]+v+w,r[1]-c],[r[0]+v+w,r[1]+c+n],[r[0]-v,r[1]+g+x+M]],z=t.f.getBaseColor(t);t.cfx.fillStyle="rgba(0,0,0,"+t.r.sd(0,.2)+")",t.cfx.beginPath(),t.cfx.moveTo(b[0][0]-1,b[0][1]),t.cfx.lineTo(b[1][0]-1,b[1][1]),t.cfx.lineTo(b[2][0]-1,b[2][1]),t.cfx.lineTo(b[3][0]-1,b[3][1]),t.cfx.fill(),t.cfx.fillStyle=h(a(z,t.r.sd(.7,1))),t.cfx.beginPath(),t.cfx.moveTo(b[0][0],b[0][1]),t.cfx.lineTo(b[1][0],b[1][1]),t.cfx.lineTo(b[2][0],b[2][1]),t.cfx.lineTo(b[3][0],b[3][1]),t.cfx.fill()};const M=[];M[0]=function(t){for(var r=.05*((t.w-48)*(t.h-48)),e=Math.ceil((t.w-48)*t.f.randomizer.hd(.1,1,"outline0 iw")*.2),o=[[[t.hw-e,24],[t.hw+e,t.h-24]]],i=2+Math.floor(t.r.sd(.5,1)*t.f.randomizer.hd(2,8,"outline0 bc")*Math.sqrt(t.size)),h=1;h<i;h++){var a=o[t.r.si(0,o.length-1)],c=[a[0][0]+t.r.sd(0,1)*(a[1][0]-a[0][0]),a[0][1]+t.r.sd(0,1)*(a[1][1]-a[0][1])];c[1]<.5*(a[0][1]+a[1][1])&&t.r.sb(t.f.randomizer.hd(.5,1.5,"outline0 frontbias"))&&(c[1]=a[1][1]-(c[1]-a[0][1]));var n=[s(t.r.sd(0,1)*t.w,24,t.w-24),s(t.r.sd(0,1)*t.h,24,t.h-24)],l=r/Math.abs((n[0]-c[0])*(n[1]-c[1]));if(l<1&&(n[0]=c[0]+(n[0]-c[0])*l,n[1]=c[1]+(n[1]-c[1])*l),c[0]>n[0]){var f=c[0];c[0]=n[0],n[0]=f}if(c[1]>n[1]){f=c[1];c[1]=n[1],n[1]=f}o.push([[Math.floor(c[0]),Math.floor(c[1])],[Math.ceil(n[0]),Math.ceil(n[1])]])}t.csx.fillStyle="#FFFFFF";for(h=0;h<o.length;h++){var d=o[h];t.csx.fillRect(d[0][0],d[0][1],d[1][0]-d[0][0],d[1][1]-d[0][1]),t.csx.fillRect(t.w-d[1][0],d[0][1],d[1][0]-d[0][0],d[1][1]-d[0][1])}},M[1]=function(t){for(var r=.05*((t.w-48)*(t.h-48)),e=Math.max(2,Math.sqrt(r/Math.PI)),o=Math.ceil((t.w-48)*t.f.randomizer.hd(.1,1,"outline1 iw")*.2),s=[],i=Math.floor((t.h-48)/(2*o)),h=0;h<i;h++){let r=[t.hw,t.h-(24+o*(2*h+1))];s.push({v:r,r:o})}var a=i+Math.floor(t.r.sd(.5,1)*t.f.randomizer.hd(10,50,"outline1 cc")*Math.sqrt(t.size));for(h=i;h<a;h++){var c=s[Math.max(t.r.si(0,s.length-1),t.r.si(0,s.length-1))],n=t.r.sd(1,e),l=t.r.sd(Math.max(0,c.r-n),c.r);if((f=t.r.sd(0,2*Math.PI))>Math.PI&&t.r.sb(t.f.randomizer.hd(.5,1.5,"outline1 frontbias")))var f=t.r.sd(0,Math.PI);let r=[c.v[0]+Math.cos(f)*l,c.v[1]+Math.sin(f)*l];n=Math.min(n,r[0]-24),n=Math.min(n,t.w-24-r[0]),n=Math.min(n,r[1]-24),n=Math.min(n,t.h-24-r[1]),s.push({v:r,r:n})}t.csx.fillStyle="#FFFFFF";for(let r=0;r<s.length;r++){const e=s[r];t.csx.beginPath(),t.csx.arc(e.v[0],e.v[1],e.r,0,2*Math.PI),t.csx.fill(),t.csx.beginPath(),t.csx.arc(t.w-e.v[0],e.v[1],e.r,0,2*Math.PI),t.csx.fill()}},M[2]=function(t){var r=[t.w-48,t.h-48],e=[[t.hw,t.r.sd(0,.05)*r[1]+24],[t.hw,t.r.sd(.95,1)*r[1]+24]],o=6/t.size+t.f.randomizer.hd(.03,.1,"outline2 basefatness"),s=1/o,i=Math.max(3,Math.ceil(s*t.r.sd(.05,.1)*Math.sqrt(t.size)));t.csx.lineCap=["round","square"][t.f.randomizer.hi(0,1,"outline2 linecap")],t.csx.strokeStyle="#FFFFFF";for(var h=1;h<i;h++){var a=e[h];null==a&&(a=[t.r.sd(0,1)*r[0]+24,Math.pow(t.r.sd(0,1),t.f.randomizer.hd(.1,1,"outline2 frontbias"))*r[1]+24],e.push(a));for(var c=1+t.r.sseq(t.f.randomizer.hd(0,1,"outline2 conadjust"),3),n=0;n<c;n++){var l=e[t.r.si(0,e.length-2)];t.csx.lineWidth=t.r.sd(.7,1)*o*t.size,t.csx.beginPath(),t.csx.moveTo(l[0],l[1]),t.csx.lineTo(a[0],a[1]),t.csx.stroke(),t.csx.beginPath(),t.csx.moveTo(t.w-l[0],l[1]),t.csx.lineTo(t.w-a[0],a[1]),t.csx.stroke()}}};class g{constructor(t,r){this.extradone=0,this.nextpass=0,this.nextcell=0,this.totaldone=0,this.f=t,this.baseSeed=r,this.seed=this.f.seed+this.baseSeed,this.r=new o(this.seed),this.size=Math.pow(this.r.sd(this.f.randomizer.hd(2.5,3.5,"size min"),this.f.randomizer.hd(5,7,"size max")),3);const e=this.r.sd(this.f.randomizer.hd(.5,1,"wratio min"),this.f.randomizer.hd(1,1.3,"wratio max")),s=this.r.sd(this.f.randomizer.hd(.7,1,"hratio min"),this.f.randomizer.hd(1.1,1.7,"hratio max"));this.w=Math.floor(this.size*e)+48,this.hw=Math.floor(this.w/2),this.gw=Math.floor((this.w-48)/6),this.gwextra=.5*(this.w-6*this.gw),this.h=Math.floor(this.size*s)+48,this.hh=Math.floor(this.h/2),this.gh=Math.floor((this.h-48)/6),this.ghextra=.5*(this.h-6*this.gh),this.cs=document.createElement("canvas"),this.cs.setAttribute("width",String(this.w)),this.cs.setAttribute("height",String(this.h)),this.csx=this.cs.getContext("2d"),this.cf=document.createElement("canvas"),this.cf.setAttribute("width",String(this.w)),this.cf.setAttribute("height",String(this.h)),this.cfx=this.cf.getContext("2d"),M[this.f.randomizer.hchoose([1,1,1],"outline type")](this),this.csd=this.csx.getImageData(0,0,this.w,this.h),this.cgrid=[];for(var i=0;i<this.gw;i++){this.cgrid[i]=[];for(var h=0;h<this.gh;h++)this.cgrid[i][h]={gx:i,gy:h,x:Math.floor(this.gwextra+6*(i+.5)),y:Math.floor(this.ghextra+6*(h+.5)),state:0}}this.goodcells=[this.cgrid[Math.floor(this.gw/2)][Math.floor(this.gh/2)]];for(var a=0;a<this.goodcells.length;){var c;if((l=this.goodcells[a]).gx>0)0==(c=this.cgrid[l.gx-1][l.gy]).state&&(this.getspa(c.x,c.y)>0?(c.state=1,this.goodcells.push(c)):c.state=-1);if(l.gx<this.gw-1)0==(c=this.cgrid[l.gx+1][l.gy]).state&&(this.getspa(c.x,c.y)>0?(c.state=1,this.goodcells.push(c)):c.state=-1);if(l.gy>0)0==(c=this.cgrid[l.gx][l.gy-1]).state&&(this.getspa(c.x,c.y)>0?(c.state=1,this.goodcells.push(c)):c.state=-1);if(l.gy<this.gh-1)0==(c=this.cgrid[l.gx][l.gy+1]).state&&(this.getspa(c.x,c.y)>0?(c.state=1,this.goodcells.push(c)):c.state=-1);a++}for(var n=0;n<this.goodcells.length;n++){var l=this.goodcells[n],f=this.cgrid[this.gw-1-l.gx][l.gy];1!=f.state&&(f.state=1,this.goodcells.push(f))}this.passes=this.f.randomizer.hi(1,2,"base component passes"),this.extra=Math.max(1,Math.floor(this.goodcells.length*this.f.randomizer.hd(0,1/this.passes,"extra component amount"))),this.totalcomponents=this.passes*this.goodcells.length+this.extra}getcell(t,r){var e=Math.floor((t-this.gwextra)/6),o=Math.floor((r-this.ghextra)/6);return e<0||e>=this.gw||o<0||o>=this.gh?null:this.cgrid[e][o]}getcellstate(t,r){var e=this.getcell(t,r);return null==e?0:e.state}getspa(t,r){return t=Math.floor(t),r=Math.floor(r),t<0||t>this.w||r<0||r>this.h?-1:this.csd.data[4*(r*this.w+t)+3]}getpcdone(){return this.totaldone/this.totalcomponents}addcomponent(){var t;if(this.nextpass<this.passes)this.nextcell<this.goodcells.length?(t=this.goodcells[this.nextcell],this.nextcell++):(this.nextpass++,t=this.goodcells[0],this.nextcell=1);else{if(!(this.extradone<this.extra))return!0;t=this.goodcells[this.r.si(0,this.goodcells.length-1)],this.extradone++}for(var r=[t.x,t.y],e=0;e<10;e++){var o=[t.x+this.r.si(-6,6),t.y+this.r.si(-6,6)];if(!(o[0]<24||o[0]>this.w-24||o[1]<24||o[1]>this.h-24)&&!(this.getspa(o[0],o[1])<=0)){r=o;break}}return Math.abs(r[0]-this.hw)<6&&this.r.sb(this.f.randomizer.hd(0,1,"com middleness"))&&(r[0]=Math.floor(this.hw)),u[this.r.schoose(this.f.componentChances)](this,r),this.totaldone++,!1}}function p(t){for(var r=1206170165,e=t.length-1;e>=0;e--){var o=t.charCodeAt(e);r=(r<<5)+r^o^r<<o%13+1^r>>o%17+1}return r>>>0}function v(t,r,e){return null==e?Math.floor(t+Math.random()*(r-t+1)):Math.floor(t+function(t){return(4294967296*p("."+t)+p(t))/0x10000000000000000}(e)*(r-t+1))}var w="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function b(t,r){for(var e="",o=0;o<t;o++)e+=w[v(0,w.length-1,r+"_"+o)];return e}var z=null;function C(t,r){return z=new g(new n(t),r),function(){if(null!=z){var t=!1;do{t=z.addcomponent()}while(!t);z.cfx.clearRect(z.hw+z.w%2,0,z.w,z.h),z.cfx.scale(-1,1),z.cfx.drawImage(z.cf,0-z.w,0)}}(),z}function S(t){return C(t,b(16,"_"+Math.random()))}function y(){return S(b(16,"_"+Math.random()))}}]);const _starshipwright$newship=starshipwright.newship,_starshipwright$newfaction=starshipwright.newfaction;export{_starshipwright$newship as newship,_starshipwright$newfaction as newfaction};